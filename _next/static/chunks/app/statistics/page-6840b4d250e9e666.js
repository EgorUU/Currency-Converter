(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[888],{3205:()=>{},4613:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var l=r(5155);r(3205);var n=r(6087),a=r.n(n),s=r(2115),c=r(8592),i=r(4540),o=r(1769),u=r(3464);let d=()=>{let e=(0,i.d4)(e=>e.currentCurrency.currentCurrency1),t=(0,i.d4)(e=>e.currentCurrency.currentCurrency2),r=(0,i.d4)(e=>e.currentCurrenciesValues.currentCurrencyValue1);(0,i.d4)(e=>e.currentCurrenciesValues.currentCurrencyValue2);let[n,a]=(0,s.useState)([].reverse()),d=(0,s.useRef)(null),h=()=>{if(7==n.length){var e;let t=null==d?void 0:d.current.getContext("2d");t.clearRect(0,0,null==d?void 0:d.current.width,null==d?void 0:d.current.height);let r=Math.max(...n),l=Math.min(...n);t.beginPath(),t.lineWidth=3;let a=(null==y||null==(e=y.current)?void 0:e.offsetWidth)/n.length;console.log(a),n.forEach((e,n)=>{let s=600-(e-l)/(r-l)*600;0===n?t.moveTo(a/2,s):t.lineTo(n*a+a/2,s)}),t.strokeStyle="rgba(31, 108, 159, 1)",t.stroke()}};(0,s.useEffect)(()=>{n.length>0&&(console.log(n),h())},[n]);let{data:v,isLoading:f,isSuccess:g,isError:x,error:m}=(0,o.I)({queryKey:["data"],queryFn:async()=>{a([]);for(let l=0;l<7;l++)try{let n=new Date,s=new Date(n.getTime()-24*l*36e5),i=s.getDate(),o=s.getMonth()+1,d=s.getFullYear(),h="".concat(i,".").concat(o>9?o:"0".concat(o),".").concat(d),v=(await u.A.post(c.t+"/week",{data:h})).data,f="RUB"==e?1:parseFloat(v.ValCurs.Valute.find(t=>t.CharCode[0]===e).Value[0].replace(",",".")),g="RUB"==t?1:parseFloat(v.ValCurs.Valute.find(e=>e.CharCode[0]===t).Value[0].replace(",","."));a(e=>[...e,f*r/g].reverse())}catch(e){console.error(e)}return n}});(0,s.useEffect)(()=>{g&&console.log(n),x&&console.error("error")},[]);let y=(0,s.useRef)(null);return(0,l.jsxs)("div",{className:"statistics-chart-wrapper",children:[(0,l.jsxs)("div",{className:"statistics-chart",ref:y,children:[(0,l.jsx)("div",{className:"statistics-chart-days",children:f?(0,l.jsx)("div",{children:"loading..."}):(()=>{let e=[];for(let a=0;a<n.length;a++){var r;console.log("ew"),e.push((0,l.jsx)("div",{className:"day",onMouseLeave:e=>{e.target.classList.remove("hover"),(null==d?void 0:d.current.getContext("2d")).clearRect(0,0,null==d?void 0:d.current.width,null==d?void 0:d.current.height),h()},onMouseEnter:e=>{var r;e.target.classList.add("hover");let l=null==d?void 0:d.current.getContext("2d"),s=Math.max(...n),c=Math.min(...n);l.beginPath();let i=(null==y||null==(r=y.current)?void 0:r.offsetWidth)/n.length,o=600-(n[a]-c)/(s-c)*600,u=a*i+i/2;l.textAlign="center",l.textBaseline="middle",l.font="bold 16px sans-serif",l.fillText("".concat(n[a]," ").concat(t),u+40,o-15),l.fillStyle="black",l.beginPath(),l.arc(u,o,3,0,2*Math.PI),l.fillStyle="black",l.fill()},style:{width:"".concat((null==y||null==(r=y.current)?void 0:r.offsetWidth)/n.length,"px")}},a))}return e})()}),(0,l.jsx)("canvas",{width:"900",height:"600",id:"chart-canvas",ref:d})]}),(0,l.jsx)("div",{className:"statistics-days",children:(()=>{let e=[],t=["Января","Февраля","Марта","Апреля","Мая","Июня","Июля","Августа","Сентября","Октября","Ноября","Декабря"];for(let a=0;a<n.length;a++){var r;e.push((0,l.jsx)("h1",{style:{width:"".concat((null==y||null==(r=y.current)?void 0:r.offsetWidth)/7,"px")},children:new Date().getDate()-6+a+" ".concat(t[new Date().getMonth()+1])}))}return e})()})]})},h=()=>{let[e,t]=(0,s.useState)(1);return(0,l.jsxs)("div",{className:"statistics",children:[(0,l.jsxs)("div",{className:"choices",children:[(0,l.jsx)("h1",{className:a().className,children:"График изменения курса валюты"}),(0,l.jsx)("div",{className:"choices-buttons",children:(0,l.jsx)("div",{className:"choices-buttons-item week active",children:(0,l.jsx)("h1",{children:"За последние 7 дней"})})})]}),(0,l.jsx)(d,{})]})}},5979:(e,t,r)=>{Promise.resolve().then(r.bind(r,4613))},6087:e=>{e.exports={style:{fontFamily:"'Ubuntu', 'Ubuntu Fallback'",fontWeight:400,fontStyle:"normal"},className:"__className_31c866"}},8592:(e,t,r)=>{"use strict";r.d(t,{t:()=>l});let l="https://currency-converter-server-lxzt.onrender.com"}},e=>{var t=t=>e(e.s=t);e.O(0,[227,210,696,441,684,358],()=>t(5979)),_N_E=e.O()}]);